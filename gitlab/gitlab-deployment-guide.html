<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="GitLab Configuration Guide" href="gitlab-configuration-guide.html" /><link rel="prev" title="GitLab OS Installation Guide" href="gitlab-os-installation-guide.html" />
        <link rel="canonical" href="https://engwsc.com/gitlab/gitlab-deployment-guide.html" />

    <meta name="generator" content="sphinx-5.0.2, furo 2022.06.21"/>
        <title>GitLab Deployment Guide - Engineering Workstation Cluster Deployment Guide documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Engineering Workstation Cluster Deployment Guide  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Engineering Workstation Cluster Deployment Guide  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Overview:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../topology.html">Cluster Topology</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../acronyms.html">Acronyms and Abbreviations</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../assumptions.html">Assumptions and Warnings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../license.html">License</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VMM</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../vmm/vmm-overview.html">Virtual Machine Manager</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../vmm/vmm-os-installation-guide.html">Virtual Machine Manager OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../vmm/vmm-deployment-guide.html">Virtual Machine Manager Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NFS</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../nfs/nfs-overview.html">Network File System</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../nfs/nfs-server-os-installation-guide.html">NFS Server OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../nfs/nfs-server-deployment-guide.html">NFS Server Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../nfs/nfs-client-deployment-guide.html">NFS Client Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IdM</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/idm-overview.html">Identity Management</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/idm-server-os-installation-guide.html">IdM Server OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/idm-server-deployment-guide.html">IdM Server Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/idm-client-deployment-guide.html">IdM Client Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/passwordless-ssh-deployment-guide.html">Passwordless SSH Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../idm/idm-server-usage-guide.html">IdM Server Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GitLab</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="gitlab-overview.html">GitLab</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="gitlab-os-installation-guide.html">GitLab OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">GitLab Deployment Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="gitlab-configuration-guide.html">GitLab Configuration Guide</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slurm</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-overview.html">Slurm Workload Manager</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-controller-os-installation-guide.html">Slurm Controller OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-controller-deployment-guide.html">Slurm Controller Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-compute-node-deployment-guide.html">Slurm Compute Node Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-controller-usage-guide.html">Slurm Controller Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../slurm/slurm-compute-node-usage-guide.html">Slurm Compute Node Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graylog</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../graylog/graylog-overview.html">Graylog</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../graylog/graylog-os-installation-guide.html">Graylog OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../graylog/graylog-deployment-guide.html">Graylog Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../graylog/rsyslog-deployment-guide.html">RSyslog Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ansible/ansible-overview.html">Ansible</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ansible/ansible-control-node-os-installation-guide.html">Ansible Control Node OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ansible/ansible-control-node-deployment-guide.html">Ansible Control Node Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ansible/ansible-control-node-usage-guide.html">Ansible Control Node Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">InfluxDB</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../influxdb/influxdb-overview.html">InfluxDB</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../influxdb/influxdb-os-installation-guide.html">InfluxDB OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../influxdb/influxdb-deployment-guide.html">InfluxDB Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../influxdb/telegraf-deployment-guide.html">Telegraf Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../influxdb/influxdb-usage-guide.html">InfluxDB Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Grafana</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grafana/grafana-overview.html">Grafana</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grafana/grafana-os-installation-guide.html">Grafana OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grafana/grafana-deployment-guide.html">Grafana Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grafana/grafana-usage-guide.html">Grafana Usage Guide</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Docker</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/docker-overview.html">Docker</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/docker-os-installation-guide.html">Docker OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/docker-deployment-guide.html">Docker Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Mirror</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mirror/mirror-overview.html">Repository Mirror</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mirror/mirror-server-os-installation-guide.html">Repository Mirror Server OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mirror/mirror-server-deployment-guide.html">Repository Mirror Server Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mirror/mirror-client-deployment-guide.html">Repository Mirror Client Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User/Compute Nodes</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/user-overview.html">User/Compute Nodes</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/user-os-installation-guide.html">User/Compute Node OS Installation Guide</a><input class="toctree-checkbox" id="toctree-checkbox-52" name="toctree-checkbox-52" role="switch" type="checkbox"/><label for="toctree-checkbox-52"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/user-deployment-guide.html">User/Compute Node Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-53" name="toctree-checkbox-53" role="switch" type="checkbox"/><label for="toctree-checkbox-53"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/tool-deployment-guide.html">Tool Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-54" name="toctree-checkbox-54" role="switch" type="checkbox"/><label for="toctree-checkbox-54"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/env-modules-deployment-guide.html">Environment Modules Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-55" name="toctree-checkbox-55" role="switch" type="checkbox"/><label for="toctree-checkbox-55"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/modulefile-deployment-example-guide.html">Modulefile Deployment Example Guide</a><input class="toctree-checkbox" id="toctree-checkbox-56" name="toctree-checkbox-56" role="switch" type="checkbox"/><label for="toctree-checkbox-56"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/xrdp-deployment-guide.html">xrdp Deployment Guide</a><input class="toctree-checkbox" id="toctree-checkbox-57" name="toctree-checkbox-57" role="switch" type="checkbox"/><label for="toctree-checkbox-57"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="gitlab-deployment-guide">
<h1>GitLab Deployment Guide<a class="headerlink" href="#gitlab-deployment-guide" title="Permalink to this heading">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The following instructions are for deploying GitLab.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">#</a></h2>
<p>This guide is written for a Red Hat Enterprise Linux 8 based operating system which
is operating within a cluster of systems and the following are the prerequisites:</p>
<ul class="simple">
<li><p><a class="reference internal" href="gitlab-os-installation-guide.html"><span class="doc">GitLab OS Installation Guide</span></a></p></li>
<li><p><a class="reference internal" href="../idm/idm-client-deployment-guide.html"><span class="doc">IdM Client Deployment Guide</span></a></p></li>
<li><p><a class="reference internal" href="../nfs/nfs-client-deployment-guide.html"><span class="doc">NFS Client Deployment Guide</span></a></p></li>
</ul>
<p>If deploying as a standalone service, adjust the hostname fields accordingly and
omit steps involving IdM, NFS, and follow-on deployment guides.</p>
</section>
<section id="follow-on-deployments">
<h2>Follow-on Deployments<a class="headerlink" href="#follow-on-deployments" title="Permalink to this heading">#</a></h2>
<p>The following guides can be applied after the deployment of their associated nodes.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../graylog/rsyslog-deployment-guide.html"><span class="doc">RSyslog Deployment Guide</span></a></p></li>
<li><p><a class="reference internal" href="../influxdb/telegraf-deployment-guide.html"><span class="doc">Telegraf Deployment Guide</span></a></p></li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>These instructions were written for and tested on GitLab Community Edition (CE) <code class="docutils literal notranslate"><span class="pre">15.11.3</span></code>.</p>
</div></blockquote>
<blockquote>
<div><p>Instructions are based on the following documentation: <br />
<a class="reference external" href="https://about.gitlab.com/install/#almalinux-8">https://about.gitlab.com/install/#almalinux-8</a>
<a class="reference external" href="https://docs.gitlab.com/omnibus/settings/nginx.html#manually-configuring-https">https://docs.gitlab.com/omnibus/settings/nginx.html#manually-configuring-https</a></p>
</div></blockquote>
</section>
<section id="post-deployment">
<h2>Post Deployment<a class="headerlink" href="#post-deployment" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>The GitLab can be accessed at the following URL: <br />
<a class="reference external" href="https://gitlab.engwsc.example.com">https://gitlab.engwsc.example.com</a></p>
<p>Username: <code class="docutils literal notranslate"><span class="pre">root</span></code> <br />
Password (In File): <code class="docutils literal notranslate"><span class="pre">/etc/gitlab/initial_root_password</span></code></p>
</div></blockquote>
</section>
<section id="deployment-scripts">
<h2>Deployment Scripts<a class="headerlink" href="#deployment-scripts" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An example bash script of the instructions has been provided: <br />
<a class="reference download internal" download="" href="../_downloads/80a93ed19f8923822533b4244e4cf71a/deploy-gitlab.sh"><code class="xref download docutils literal notranslate"><span class="pre">../_static/gitlab/deploy-gitlab.sh</span></code></a></p>
</div>
</section>
<section id="deployment-notes">
<h2>Deployment Notes<a class="headerlink" href="#deployment-notes" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>GitLab can be installed using the official Omnibus RPM file or by
configuring the system to use the Omnibus package repository.  Either
way is acceptable but it is not recommended that the package repository
be enabled by default.  Updating GitLab every time the system is updated
can introduce unintended changes that can break GitLab.</p>
<p>When GitLab is updated, any changes to the <code class="docutils literal notranslate"><span class="pre">/opt/gitlab/etc/gitlab.rb.template</span></code>
template file must be manually merged into GitLab’s configuration file
<code class="docutils literal notranslate"><span class="pre">/etc/gitlab/gitlab.rb</span></code></p>
</div></blockquote>
<blockquote>
<div><p>There are two no-cost editions of GitLab.  The <code class="docutils literal notranslate"><span class="pre">Community</span> <span class="pre">Edition</span></code> (CE) and the
<code class="docutils literal notranslate"><span class="pre">Enterprise</span> <span class="pre">Edition</span></code> (EE).  Both editions provide the same functionality but the
Enterprise Edition allows for an easier migration path to paid-for features. These
instructions cover the installation of the <code class="docutils literal notranslate"><span class="pre">Community</span> <span class="pre">Edition</span></code> which can be
migrated to the Enterprise Edition if those features are needed.</p>
<p>See: <a class="reference external" href="https://docs.gitlab.com/ee/update/upgrading_from_ce_to_ee.html">https://docs.gitlab.com/ee/update/upgrading_from_ce_to_ee.html</a></p>
</div></blockquote>
<blockquote>
<div><p>GitLab must be run from local storage (or a VM with local storage).  GitLab does not support
and has known issues with executing from NFS mounts either hosted inside the VM or externally.</p>
<p>See: <a class="reference external" href="https://docs.gitlab.com/ee/administration/gitaly/">https://docs.gitlab.com/ee/administration/gitaly/</a></p>
</div></blockquote>
<blockquote>
<div><p>When installing GitLab and using a HTTPS URL the following error message may be encountered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Running</span> <span class="n">handlers</span><span class="p">:</span>
<span class="n">There</span> <span class="n">was</span> <span class="n">an</span> <span class="n">error</span> <span class="n">running</span> <span class="n">gitlab</span><span class="o">-</span><span class="n">ctl</span> <span class="n">reconfigure</span><span class="p">:</span>

<span class="n">letsencrypt_certificate</span><span class="p">[</span><span class="n">gitlab</span><span class="p">]</span> <span class="p">(</span><span class="n">letsencrypt</span><span class="p">::</span><span class="n">http_authorization</span> <span class="n">line</span> <span class="mi">6</span><span class="p">)</span> <span class="n">had</span> <span class="n">an</span> <span class="n">error</span><span class="p">:</span> <span class="n">Acme</span><span class="p">::</span><span class="n">Client</span><span class="p">::</span><span class="n">Error</span><span class="p">::</span><span class="n">RejectedIdentifier</span><span class="p">:</span>
<span class="n">acme_certificate</span><span class="p">[</span><span class="n">staging</span><span class="p">]</span> <span class="p">(</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">gitlab</span><span class="o">/</span><span class="n">embedded</span><span class="o">/</span><span class="n">cookbooks</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">certificate</span><span class="o">.</span><span class="n">rb</span> <span class="n">line</span> <span class="mi">41</span><span class="p">)</span> <span class="n">had</span>
<span class="n">an</span> <span class="n">error</span><span class="p">:</span> <span class="n">Acme</span><span class="p">::</span><span class="n">Client</span><span class="p">::</span><span class="n">Error</span><span class="p">::</span><span class="n">RejectedIdentifier</span><span class="p">:</span> <span class="n">Error</span> <span class="n">creating</span> <span class="n">new</span> <span class="n">order</span> <span class="p">::</span> <span class="n">Cannot</span> <span class="n">issue</span> <span class="k">for</span> <span class="s2">&quot;gitlab&quot;</span><span class="p">:</span> <span class="n">Domain</span> <span class="n">name</span> <span class="n">needs</span>
<span class="n">at</span> <span class="n">least</span> <span class="n">one</span> <span class="n">dot</span>
</pre></div>
</div>
<p>The error is caused by a failure for Let’s Encrypt to acquire an SSL certificate which it
attempts to aquire during installation.  GitLab should be deployed with a valid SSL
certificate that is implemented after installation and this error can be ignored for now.
The installation process should generate self-signed certificates when the Let’s Encrypt
attempt fails.</p>
<p>These instructions install GitLab without an SSL certificate and apply one later to
avoid this error in the installation process.</p>
</div></blockquote>
<blockquote>
<div><p>When changes are made to the configuration file <code class="docutils literal notranslate"><span class="pre">/etc/gitlab/gitlab.rb</span></code> GitLab will
need to be reconfigured.  The command to reconfigure GitLab is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">gitlab</span><span class="o">-</span><span class="n">ctl</span> <span class="n">reconfigure</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="deployment-steps">
<h2>Deployment Steps<a class="headerlink" href="#deployment-steps" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instructions assume execution using the <code class="docutils literal notranslate"><span class="pre">root</span></code> account.</p>
</div>
<ol class="arabic simple">
<li><p>Connect the system to the NFS Server:</p></li>
</ol>
<blockquote>
<div><p>See Guide: <a class="reference internal" href="../nfs/nfs-client-deployment-guide.html"><span class="doc">NFS Client Deployment Guide</span></a></p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Connect the system to the IdM Server:</p></li>
</ol>
<blockquote>
<div><p>See Guide: <a class="reference internal" href="../idm/idm-client-deployment-guide.html"><span class="doc">IdM Client Deployment Guide</span></a></p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Install GitLab dependencies:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dnf -y install curl policycoreutils openssh-server perl postfix yum-utils
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Enable OpenSSH server daemon if not enabled:</p></li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Execute the following to determine if sshd is running: <br />
<code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">status</span> <span class="pre">sshd</span></code></p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl <span class="nb">enable</span> --now sshd
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Configure firewalld rules:</p></li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Execute the following to determine if firewalld is running: <br />
<code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">status</span> <span class="pre">firewalld</span></code></p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl <span class="nb">enable</span> --now firewalld
firewall-cmd --zone<span class="o">=</span>public --add-service<span class="o">={</span>http,https<span class="o">}</span> --permanent
firewall-cmd --reload
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="6">
<li><p>Enable Postfix:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="o">--</span><span class="n">now</span> <span class="n">postfix</span>
</pre></div>
</div>
</li>
<li><p>Add the GitLab package repository:</p></li>
</ol>
<blockquote>
<div><div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The official installation instructions call out piping the output of curl into bash which
is a security risk.  Download <code class="docutils literal notranslate"><span class="pre">script.rpm.sh</span></code> first and verify its contents before executing
the script.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh -o script.rpm.sh
chmod <span class="m">755</span> script.rpm.sh
./script.rpm.sh
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Install GitLab:</p></li>
</ol>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EXTERNAL_URL</span></code> attribute should be set to the URL that users will be using to access GitLab</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>HTTPS will be configured following installation.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">EXTERNAL_URL</span><span class="o">=</span><span class="s2">&quot;http://gitlab.engwsc.example.com&quot;</span> dnf install -y gitlab-ce
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Record the initial root password</p></li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>During deployment an initial random root password is created.  That
initial root password is stored in a file named <code class="docutils literal notranslate"><span class="pre">/etc/gitlab/initial_root_password</span></code>
but the file is automatically erased 24-hours after installation.</p>
</div>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Disable GitLab repositories:</p></li>
</ol>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is not recommended that GitLab be updated when <code class="docutils literal notranslate"><span class="pre">dnf</span> <span class="pre">update</span></code> is called.  The following step
will disable the yum/dnf repository.  When updating GitLab the dnf/yum command will need to include
the GitLab repository name.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following command can be used to update GitLab when the repository is disabled by default: <br />
<code class="docutils literal notranslate"><span class="pre">dnf</span> <span class="pre">-y</span> <span class="pre">--enablerepo=gitlab_gitlab-ce,gitlab_gitlab-ce-source</span> <span class="pre">update</span> <span class="pre">gitlab-ce</span></code></p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum-config-manager --disable gitlab_gitlab-ce
yum-config-manager --disable gitlab_gitlab-ce-source
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Create Self-Signed SSL Certificate:</p></li>
</ol>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>Replace values with the specifics of your network.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p /etc/gitlab/ssl
chmod <span class="m">755</span> /etc/gitlab/ssl

<span class="c1"># Country Name (2 letter code) [XX]:US</span>
<span class="c1"># State or Province Name (full name) []:New York</span>
<span class="c1"># Locality Name (eg, city) [Default City]:New York</span>
<span class="c1"># Organization Name (eg, company) [Default Company Ltd]:engwsc</span>
<span class="c1"># Organizational Unit Name (eg, section) []:</span>
<span class="c1"># Common Name (eg, your name or your server&#39;s hostname) []:gitlab.engwsc.example.com</span>
<span class="c1"># Email Address []:</span>

openssl req -x509 -nodes -newkey rsa:4096 <span class="se">\</span>
    -keyout <span class="s2">&quot;/etc/gitlab/ssl/gitlab.engwsc.example.com.key&quot;</span> <span class="se">\</span>
    -out <span class="s2">&quot;/etc/gitlab/ssl/gitlab.engwsc.example.com.crt&quot;</span> <span class="se">\</span>
    -subj <span class="s2">&quot;/CN=gitlab.engwsc.example.com/C=US/ST=New York/L=New York/O=engwsc&quot;</span> <span class="se">\</span>
    -days <span class="m">365</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">gitlab.rb</span></code> options:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set GitLab&#39;s external URL</span>
sed -i <span class="s2">&quot;s|external_url &#39;http://gitlab.engwsc.example.com&#39;|external_url &#39;https://gitlab.engwsc.example.com&#39;|g&quot;</span> /etc/gitlab/gitlab.rb

<span class="c1"># Disable GitLab &quot;Usage Ping&quot;</span>
sed -i <span class="s2">&quot;s/^.*gitlab_rails\[&#39;usage_ping_enabled&#39;\].*</span>$<span class="s2">/gitlab_rails[&#39;usage_ping_enabled&#39;] = false/g&quot;</span> /etc/gitlab/gitlab.rb

<span class="c1"># Enable http to https redirects</span>
sed -i <span class="s2">&quot;s/^.*nginx\[&#39;redirect_http_to_https&#39;\].*</span>$<span class="s2">/nginx[&#39;redirect_http_to_https&#39;] = true/g&quot;</span> /etc/gitlab/gitlab.rb

<span class="c1"># Disable Let&#39;s Encrypt (In-favor of Self-Signed or CA issued certs)</span>
sed -i <span class="s2">&quot;s/^.*letsencrypt\[&#39;enable&#39;\].*</span>$<span class="s2">/letsencrypt[&#39;enable&#39;] = false/g&quot;</span> /etc/gitlab/gitlab.rb
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Reconfigure GitLab</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gitlab-ctl reconfigure
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Setup GitLab using the Web interface:</p></li>
</ol>
<blockquote>
<div><p>See Guide: <a class="reference internal" href="gitlab-configuration-guide.html"><span class="doc">GitLab Configuration Guide</span></a></p>
</div></blockquote>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="gitlab-configuration-guide.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">GitLab Configuration Guide</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="gitlab-os-installation-guide.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">GitLab OS Installation Guide</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; LucAce, CC BY 4.0
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on May 14, 2023</div>
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">GitLab Deployment Guide</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#follow-on-deployments">Follow-on Deployments</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#post-deployment">Post Deployment</a></li>
<li><a class="reference internal" href="#deployment-scripts">Deployment Scripts</a></li>
<li><a class="reference internal" href="#deployment-notes">Deployment Notes</a></li>
<li><a class="reference internal" href="#deployment-steps">Deployment Steps</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>